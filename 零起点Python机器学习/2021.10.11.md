### 1.案例5-2：爱丽丝进化与文本矢量化
代码分解：
第1组代码，读取Iris数据文件，并保存到df变量：
```python
#1
fss='dat/iris.csv'
df=pd.raed_csv(fss,index_col=False)
```
第2组代码，根据xname字段，按1、2、3分别设置xid字段，完成读取Iris爱丽丝数据名称的矢量化操作。xid数据字段设置为int格式，并保存到iris2.csv文件中。
```python
#2
df.loc[df['name']=='virginica','xid']=1
df.loc[df['xname']=='setosa','xid']=2
df.loc[df['xname']=='versicolor','xid']=3
df['xid']=df['xid'].astype(int)
df.to_csv('tmp/iris2.csv',index=False)
```
第3组代码，输出修改后的df数据信息：
```python
#3
print('\n3#df')
print(df.tail())
print(df.describe())
```
第4组代码，输出xid方面的分类统计信息：
```python
d10=df['xid'].value_counts()
print('\n4#xid')
print(d10)
```
### 2.AI操作流程
机器学习与测试数据集合

- x_train,训练数据，多维参数数据集
- y_train,训练数据，一维结果数据集
- x_test,测试数据，多维参数数据集
- y_test,测试数据，一维结果数据集

通过对数据集y_train的分析，会生成一个新的预测结果数据集y_pred,这个数据集也是一维的结果数据集。通过对结果数据集y_pred与实际的测试数据集y_test进行对比，就可以检测算法模型的准确度。
机器学习运行流程

- 选择模型函数mx_fun,mx_fun是我们自定义的机器学习函数接口。
- 把训练用的特征数据集x_train和对应的特征（结果）数据集y_train,输入模型函数mx_fun。
- 系统内置的机器学习函数，会自动分析特征数据与结果数据之间的关系。这样一个过程就是机器学习过程，也是算法建模的过程。
- 通过对训练数据的机器学习和数据分析，系统会生成一个AI机器学习模型，我们将其保存到变量mx。
- 把测试数据x_test输入模型变量mx，mx会调用内置的分析函数predict，生成最终的分析结果y_pred。
- 如果是实盘，输入最新的数据，例如今天的股市数据或正在销售的足彩比赛赔率数据，系统会自动生成相关的预测数据，如：每天或未来几天股市走势数据或比赛输赢结果。

通过对y_pred和正确结果数据y_test进行对比，判断模型的准确程度
![](https://cdn.nlark.com/yuque/__puml/ca7f482aaf828c6ac68ae0face5c7694.svg#lake_card_v2=eyJ0eXBlIjoicHVtbCIsImNvZGUiOiJAc3RhcnR1bWxcblxuc3RhcnRcblxuOumAieaLqeaooeWei-WHveaVsCBteF9mdW47XG465a-85YWl6K6t57uD5pWw5o2uO1xuOuW7uueri-eul-azleaooeWei01YO1xuOui-k-WFpea1i-ivle-8iOWunuebmO-8ieaVsOaNrnhfdGVzdCAgO1xuOuiwg-eUqHByZWRpY3TliIbmnpDvvIjpooTmtYvvvInlh73mlbAgICA7XG4655Sf5oiQ5YiG5p6Q77yI6aKE5rWL77yJ57uT5p6ceV9wZXJkICAgO1xuXG5zdG9wXG5cbkBlbmR1bWwiLCJ1cmwiOiJodHRwczovL2Nkbi5ubGFyay5jb20veXVxdWUvX19wdW1sL2NhN2Y0ODJhYWY4MjhjNmFjNjhhZTBmYWNlNWM3Njk0LnN2ZyIsImlkIjoiblZEZFEiLCJtYXJnaW4iOnsidG9wIjp0cnVlLCJib3R0b20iOnRydWV9LCJjYXJkIjoiZGlhZ3JhbSJ9)### 3.Iris爱丽丝分解
第1组代码，读取Iris数据文件，并保存到df变量：
```python
#1
fss='dat/iris2.csv'
df=pd.read_csv(fss,index_col=False)
```
第2组代码，输出df数据信息：
```python
#2
print('\n2#df')
print(df.tail())
```
第3组代码，根据人工智能、机器学习算法要求，设置总的数据源x、y:
```python
#3
xlst,ysgn=['x1','x2','x3','x4'],'xid'
x,y=df[xlst],df[ysgn]
#
print('\n3# xlst,',xlst)
print('ysgn',ysgn)
print('x')
print(x.tail())
print('y')
print(y.tail())

```
第4组代码，生成x_trian、x_test、y_train、y_test数据，并输出相关数据的格式信息：
```python
#4
x_train,x_test,y_train,y_test=trainn_test_split(x,y,random_state=1)
x_test.index.name,y_test.index.name='xid','xid'
print('\n4# type')
print('type(x_train),',type(x_train))
print('type(x_test),',type(x_test))
print('type(y_train),',type(y_train))
print('type(y_test),',type(y_test))

```
第5组代码，保存相关的数据：
```python
#5
fs0='tmp/iris_'
print('\n5#  fs0,',fs0)
x_train.to_csv(fs0+'xtrain.csv',index=False);
x_test.to_csv(fs0+'xtest.csv',index=False)
y_train.to_csv(fs0+'ytrain.csv',index=False,header=True)
y_test.to_csv(fs0+'ytest.csv',index=False,header=True)
```
第6组代码，输出x数据集：
```python
#6
print('\n6# x_train')
print(x_train.tail())
print('\nx_test')
print(x_test.tail())
```
第7组代码，输出y数据集：
```python
#7
print('\n# y_train')
print(y_train.tail())
print('\ny_test')
print(y_test.tail())
```
